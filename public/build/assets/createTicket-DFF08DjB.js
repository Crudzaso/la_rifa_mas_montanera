import{Q as T,d as c,T as V,k as y,c as C,w as f,o as l,f as i,a as e,t as n,u as S,b as M,g as x,e as r,h as b,F as _,n as z}from"./app-C9Y4_UYl.js";import{_ as E,a as H}from"./AppLayout-C3rK1TvN.js";import{_ as L}from"./Alert-D6W754U8.js";import{_ as A}from"./Modal-DnnsHM76.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const F={class:"max-w-7xl mx-auto p-6"},D={class:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl shadow-xl overflow-hidden mb-8"},O={class:"relative p-8"},P={class:"flex justify-between items-start relative z-10"},Q={class:"text-white"},R={class:"text-4xl font-extrabold tracking-tight mb-2"},q={class:"flex items-center space-x-4 mt-4"},G={class:"flex items-center"},I={class:"text-xl font-bold"},J={class:"flex items-center"},K={class:"text-xl"},U={class:"bg-white rounded-2xl shadow-xl p-8 mb-6"},W={class:"flex justify-between items-center mb-6"},X={class:"flex justify-center w-full px-4"},Y={class:"grid grid-cols-10 gap-2 w-[90%]"},Z=["onClick","disabled"],ee={key:0,class:"absolute -top-1 -right-1 h-3 w-3 bg-green-500 rounded-full border border-white animate-pulse"},te={key:1,class:"absolute -top-1 -right-1 h-3 w-3 bg-red-500 rounded-full border border-white"},se={class:"bg-gradient-to-br from-gray-50 to-white rounded-2xl shadow-xl p-8"},oe={class:"flex justify-between items-start mb-6"},le={class:"flex flex-wrap gap-2 mt-3"},re={key:0,class:"text-gray-500"},ne={class:"text-right"},ae={class:"text-3xl font-bold text-indigo-600"},ie=["disabled"],de={key:0},ue={key:1},ce={key:2,xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},me={class:"p-6"},ge={class:"space-y-4"},pe={class:"flex flex-wrap gap-2"},ve={class:"font-semibold text-lg"},he={class:"mt-6 flex justify-end space-x-3"},Ce={__name:"createTicket",setup(fe){const d=T().props.raffle,o=c([]),m=c(!1),g=c(""),p=c(""),u=c(!1),w=V({raffle_id:d.id,ticket_numbers:[]}),k=y(()=>{const a=[],t=new Set(d.tickets.map(s=>s.ticket_number));for(let s=0;s<100;s++){const h=String(s).padStart(2,"0");a.push({number:h,isSold:t.has(h)})}return a}),v=y(()=>o.value.length*d.price_tickets),B=a=>{const t=o.value.indexOf(a);t===-1?o.value.push(a):o.value.splice(t,1)},$=()=>{o.value=[]},j=()=>{u.value=!0},N=()=>{w.ticket_numbers=o.value,w.post(route("tickets.store"),{preserveScroll:!0,onSuccess:()=>{g.value="Boletos comprados exitosamente",p.value="success",m.value=!0,u.value=!1,setTimeout(()=>{window.location.href=route("tickets.index")},2e3)},onError:()=>{g.value="Error al comprar los boletos",p.value="error",m.value=!0}})};return(a,t)=>(l(),C(E,{title:"Comprar Boletos"},{default:f(()=>[m.value?(l(),C(L,{key:0,message:g.value,type:p.value},null,8,["message","type"])):i("",!0),e("div",F,[e("div",D,[e("div",O,[t[5]||(t[5]=e("div",{class:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-white rounded-full opacity-10"},null,-1)),e("div",P,[e("div",Q,[e("h1",R,n(S(d).title),1),e("div",q,[e("div",G,[t[2]||(t[2]=e("svg",{class:"w-5 h-5 mr-2 text-indigo-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",I,"$"+n(S(d).price_tickets)+"/boleto",1)]),e("div",J,[t[3]||(t[3]=e("svg",{class:"w-5 h-5 mr-2 text-indigo-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 5v2m0 4v2m0 4v2M5 5a2 2 0 00-2 2v3a2 2 0 110 4v3a2 2 0 002 2h14a2 2 0 002-2v-3a2 2 0 110-4V7a2 2 0 00-2-2H5z"})],-1)),e("span",K,n(k.value.filter(s=>!s.isSold).length)+" disponibles",1)])])]),M(H,{href:a.route("raffles.index"),class:"px-6 py-3 bg-white/10 backdrop-blur-sm text-white rounded-xl hover:bg-white/20 transition-all duration-200 font-medium"},{default:f(()=>t[4]||(t[4]=[x(" ← Volver a Rifas ")])),_:1},8,["href"])])])]),e("div",U,[e("div",W,[t[7]||(t[7]=e("h2",{class:"text-2xl font-bold text-gray-800"},"Escoge tus números",-1)),o.value.length?(l(),r("button",{key:0,onClick:$,class:"group flex items-center px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-all duration-200 shadow-sm hover:shadow"},t[6]||(t[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2 group-hover:rotate-12 transition-transform duration-200",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),x(" Limpiar selección ")]))):i("",!0)]),e("div",X,[e("div",Y,[(l(!0),r(_,null,b(k.value,s=>(l(),r("button",{key:s.number,onClick:h=>!s.isSold&&B(s.number),class:z(["relative h-14 w-20 rounded-lg font-bold text-lg transition-all duration-200",{"bg-gradient-to-r from-indigo-500 to-purple-500 text-white shadow-md scale-105":o.value.includes(s.number),"bg-white border border-gray-200 text-gray-700 hover:border-indigo-500 hover:text-indigo-500":!s.isSold&&!o.value.includes(s.number),"bg-red-50 border border-red-200 text-red-300 cursor-not-allowed":s.isSold}]),disabled:s.isSold},[x(n(s.number)+" ",1),o.value.includes(s.number)?(l(),r("span",ee)):i("",!0),s.isSold?(l(),r("span",te)):i("",!0)],10,Z))),128))])])]),e("div",se,[e("div",oe,[e("div",null,[t[8]||(t[8]=e("h3",{class:"text-xl font-bold text-gray-900"},"Tus números seleccionados",-1)),e("div",le,[(l(!0),r(_,null,b(o.value,s=>(l(),r("span",{key:s,class:"px-3 py-1 bg-indigo-100 text-indigo-600 rounded-lg font-medium"},n(s),1))),128)),o.value.length?i("",!0):(l(),r("span",re," Ninguno seleccionado "))])]),e("div",ne,[t[9]||(t[9]=e("p",{class:"text-sm text-gray-600 mb-1"},"Total a pagar",-1)),e("p",ae,"$"+n(v.value),1)])]),e("button",{onClick:j,disabled:!o.value.length,class:"mt-6 w-full py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white text-lg font-bold rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-200 transform hover:scale-[1.01] disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 shadow-lg flex items-center justify-center space-x-2"},[o.value.length?(l(),r("span",de," Comprar "+n(o.value.length)+" Boleto(s) - $"+n(v.value),1)):(l(),r("span",ue," Selecciona al menos un boleto ")),o.value.length?(l(),r("svg",ce,t[10]||(t[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)]))):i("",!0)],8,ie)])]),M(A,{show:u.value,onClose:t[1]||(t[1]=s=>u.value=!1)},{default:f(()=>[e("div",me,[t[12]||(t[12]=e("h3",{class:"text-lg font-bold text-gray-900 mb-4"}," Confirmar compra ",-1)),e("div",ge,[t[11]||(t[11]=e("p",{class:"text-gray-600"}," ¿Estás seguro de comprar los siguientes números? ",-1)),e("div",pe,[(l(!0),r(_,null,b(o.value,s=>(l(),r("span",{key:s,class:"px-3 py-1 bg-indigo-100 text-indigo-600 rounded-lg font-medium"},n(s),1))),128))]),e("p",ve," Total a pagar: $"+n(v.value),1)]),e("div",he,[e("button",{onClick:t[0]||(t[0]=s=>u.value=!1),class:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg"}," Cancelar "),e("button",{onClick:N,class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700"}," Confirmar compra ")])])]),_:1},8,["show"])]),_:1}))}};export{Ce as default};
